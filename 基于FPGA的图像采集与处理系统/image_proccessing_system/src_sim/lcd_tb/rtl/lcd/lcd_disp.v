// *********************************************************************************
// 文件名: lcd_disp.v   
// 创建人: 梁辉鸿
// 创建日期: 2021.3.19
// 联系方式: 17hhliang3@stu.edu.cn
// --------------------------------------------------------------------------------- 
// 模块名: lcd_disp
// 发布版本号: V0.0
// --------------------------------------------------------------------------------- 
// 功能说明: 1)LCD显示内容模块
//            2)产生彩条数据
// --------------------------------------------------------------------------------- 
// 变更描述:     
//
// ---------------------------------------------------------------------------------
// 发布记录: 	 
//
// ---------------------------------------------------------------------------------
// *********************************************************************************


// ---------------------------------------------------------------------------------
// 引用文件 Include File
// --------------------------------------------------------------------------------- 

// ---------------------------------------------------------------------------------
// 仿真时间 Simulation Timescale
// ---------------------------------------------------------------------------------

// ---------------------------------------------------------------------------------
// 常量参数 Constant Parameters
// ---------------------------------------------------------------------------------

// ---------------------------------------------------------------------------------
// 模块定义 Module Define
// --------------------------------------------------------------------------------- 
module lcd_disp
(
    // clock & reset
    input 			    lcd_clk,                    //时钟信号
	input 			    rst_n,  		            //复位信号, 低电平有效
    
    // input signal 
    input      [10 : 0] pixel_xpos,                 //当前像素点横坐标
    input      [10 : 0] pixel_ypos,                 //当前像素点纵坐标
    input      [10 : 0] h_disp,                     //LCD 水平分辨率
    input      [10 : 0] v_disp,                     //LCD 垂直分辨率
        
    // output signal    
    output reg [15 : 0] pixel_data                  //像素数据
);

// ---------------------------------------------------------------------------------
// 局部常量 Local Constant Parameters
// ---------------------------------------------------------------------------------
    //RGB565格式
    localparam  WHITE = 16'b11111_111111_11111;     //白色
    localparam  BLACK = 16'b00000_000000_00000;     //黑色
    localparam  RED   = 16'b11111_000000_00000;     //红色
    localparam  GREEN = 16'b00000_111111_00000;     //绿色
    localparam  BLUE  = 16'b00000_000000_11111;     //蓝色

// ---------------------------------------------------------------------------------
// 模块内变量定义 Module_Variables
// --------------------------------------------------------------------------------- 

    
// ---------------------------------------------------------------------------------
// 数据流描述 Continuous Assignments
// --------------------------------------------------------------------------------- 

    
// ---------------------------------------------------------------------------------
// 行为描述 Clocked Assignments
// ---------------------------------------------------------------------------------
    //根据当前像素点坐标指定当前像素点颜色数据, 在屏幕上显示彩条
    always @(posedge lcd_clk or negedge rst_n)
    begin
        if(!rst_n)
        begin
            pixel_data <= BLACK;
        end
        else
        begin
            if((pixel_xpos >= 11'd0) && (pixel_xpos < h_disp/5 * 1))
            begin
                pixel_data <= WHITE;
            end
            else if((pixel_xpos >= h_disp/5 * 1) && (pixel_xpos < h_disp/5 * 2))
            begin
                pixel_data <= BLACK;
            end
            else if((pixel_xpos >= h_disp/5 * 2) && (pixel_xpos < h_disp/5 * 3))
            begin
                pixel_data <= RED;
            end
            else if((pixel_xpos >= h_disp/5 * 3) && (pixel_xpos < h_disp/5 * 4))
            begin
                pixel_data <= GREEN;
            end
            else if((pixel_xpos >= h_disp/5 * 4) && (pixel_xpos < h_disp/5 * 5))
            begin
                pixel_data <= BLUE;
            end
            else
            begin
                pixel_data <= BLACK;
            end
        end
    end

// ---------------------------------------------------------------------------------
// 结构化描述 Moudle Instantiate
// ---------------------------------------------------------------------------------


// ---------------------------------------------------------------------------------
// 任务定义 Called Tasks
// ---------------------------------------------------------------------------------
    

// ---------------------------------------------------------------------------------
// 函数定义 Called Functions
// ---------------------------------------------------------------------------------


endmodule 