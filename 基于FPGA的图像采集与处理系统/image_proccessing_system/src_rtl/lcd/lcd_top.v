// *********************************************************************************
// 文件名: lcd_top.v   
// 创建人: 梁辉鸿
// 创建日期: 2021.3.20
// 联系方式: 17hhliang3@stu.edu.cn
// --------------------------------------------------------------------------------- 
// 模块名: lcd_top
// 发布版本号: V0.0
// --------------------------------------------------------------------------------- 
// 功能说明: 1)LCD顶层模块
// 
// --------------------------------------------------------------------------------- 
// 变更描述:     
//    
// ---------------------------------------------------------------------------------
// 发布记录: 	 
//
// ---------------------------------------------------------------------------------
// *********************************************************************************


// ---------------------------------------------------------------------------------
// 引用文件 Include File
// --------------------------------------------------------------------------------- 

// ---------------------------------------------------------------------------------
// 仿真时间 Simulation Timescale
// ---------------------------------------------------------------------------------

// ---------------------------------------------------------------------------------
// 常量参数 Constant Parameters
// ---------------------------------------------------------------------------------

// ---------------------------------------------------------------------------------
// 模块定义 Module Define
// --------------------------------------------------------------------------------- 
module lcd_top
(
    // clock & reset
    input 			    clk,	                //时钟信号
    input               lcd_clk,                //LCD 驱动模块时钟, 10MHz
	input 			    rst_n,                  //复位信号, 低电平有效
    
    // input signal
    input      [15 : 0] pixel_data,             //RGB565格式的像素点数据
    
    // output signal
    output              lcd_data_req,           //LCD 请求像素点颜色数据输入
    
    // LCD 接口
    output              lcd_de,                 //LCD 数据输入使能信号
    output              lcd_hs,                 //LCD 行同步信号
    output              lcd_vs,                 //LCD 场同步信号
    output              lcd_bl,                 //LCD 背光控制信号
    output              lcd_rst,                //LCD 复位信号
    output              lcd_dclk,               //LCD 驱动时钟
    output     [ 7 : 0] lcd_r,                  //LCD RGB888红色数据
    output     [ 7 : 0] lcd_g,                  //LCD RGB888绿色数据
    output     [ 7 : 0] lcd_b                   //LCD RGB888蓝色数据
);

// ---------------------------------------------------------------------------------
// 局部常量 Local Constant Parameters
// ---------------------------------------------------------------------------------


// ---------------------------------------------------------------------------------
// 模块内变量定义 Module_Variables
// --------------------------------------------------------------------------------- 
    wire       [15 : 0] lcd_rgb565;             //LCD RGB565颜色数据
    
// ---------------------------------------------------------------------------------
// 数据流描述 Continuous Assignments
// --------------------------------------------------------------------------------- 
    //将RGB565格式配置为RGB888格式输出
    assign lcd_r = {lcd_rgb565[15 : 11], 3'b000};
    assign lcd_g = {lcd_rgb565[10 :  5], 2'b00};
    assign lcd_b = {lcd_rgb565[ 4 :  0], 3'b000};
    
// ---------------------------------------------------------------------------------
// 行为描述 Clocked Assignments
// ---------------------------------------------------------------------------------
    

// ---------------------------------------------------------------------------------
// 结构化描述 Moudle Instantiate
// ---------------------------------------------------------------------------------
    // LCD控制驱动模块
    lcd_controller      U_lcd_controller
    (
        // clock & reset
        .lcd_clk                (lcd_clk),
        .rst_n 	                (rst_n),

        // input signal
        .pixel_data             (pixel_data),

        // output signal
        .lcd_data_req           (lcd_data_req),
        .pixel_xpos             (),
        .pixel_ypos             (),
        .lcd_rgb565             (lcd_rgb565),
        .h_disp                 (),
        .v_disp                 (),

        // LCD 接口
        .lcd_de                 (lcd_de),
        .lcd_hs                 (lcd_hs),
        .lcd_vs                 (lcd_vs),
        .lcd_bl                 (lcd_bl),
        .lcd_rst                (lcd_rst),
        .lcd_dclk               (lcd_dclk)
    );

// ---------------------------------------------------------------------------------
// 任务定义 Called Tasks
// ---------------------------------------------------------------------------------
    
	
// ---------------------------------------------------------------------------------
// 函数定义 Called Functions
// ---------------------------------------------------------------------------------

    
endmodule 